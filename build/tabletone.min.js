(function(){var n,t,e,r,i,u,o,a,c;u=new(window.AudioContext||window.webkitAudioContext),e=[],r={},a=function(n){return r[n]?Promise.resolve(r[n]):fetch(n).then(function(n){return n.arrayBuffer()}).then(function(n){return new Promise(function(t){return u.decodeAudioData(n,t)})}).then(function(t){return r[n]=t,t})},n=function(n){return a(n).then(function(n){var t;return t=u.createBufferSource(),t.buffer=n,t.loop=!0,t.connect(u.destination),e.push(t),t.start(0,u.currentTime%n.duration,Math.pow(2,16)),t})},c=function(n){var t;return t=e.indexOf(n),n.disconnect(),n.stop(0),t>-1&&e.splice(t,1),n},o=function(n,t){var e,r,i,u;return n.fftSize=512,e=new Float32Array(n.fftSize),u=null,i=null,(r=function(){return requestAnimationFrame(function(){var o,a,c,l;for(n.getFloatTimeDomainData(e),o=0,a=0,c=e.length;c>a;a++)l=e[a],o+=Math.abs(l);return o/=e.length,(!u||u>o)&&(u=o),(!i||o>i)&&(i=o),l=Math.round(1e3*Math.min((o-u)/(i-u),1))/1e3,t.style.opacity=1-l,n.finished?void 0:r()})})()},t=function(n){var t,e;return t=u.createAnalyser(),n.audio.connect(t),n.analyser=t,n.innerHTML="",e=document.createElement("tt-pulse"),n.appendChild(e),o(t,e)},i=function(e){var r;return this.playing?(c(this.audio),this.innerHTML="",null!=(r=this.analyser)&&(r.finished=!0),this.playing=!1,this.classList.remove("playing")):n(this.src).then(function(n){return function(e){return n.classList.add("playing"),n.audio=e,n.pulse&&t(n),n.playing=!0}}(this))},function(){var n,t,e,r,u;for(r=document.querySelectorAll("tt-cell"),u=[],t=0,e=r.length;e>t;t++)n=r[t],n.tabletone||(n.tabletone=!0,n.src=n.getAttribute("src"),n.pulse=null!=n.getAttribute("pulse"),n.playing=!1,u.push(n.addEventListener("click",i)));return u}()}).call(this);