(function(){var t,n,e,r,i,u,a,o,c;u=new(window.AudioContext||window.webkitAudioContext),e=[],r={},o=function(t){return r[t]?Promise.resolve(r[t]):fetch(t).then(function(t){return t.arrayBuffer()}).then(function(t){return new Promise(function(n){return u.decodeAudioData(t,n)})}).then(function(n){return r[t]=n,n})},t=function(t){return o(t).then(function(t){var n,r;r=u.createBufferSource(),r.buffer=t,r.loop=!0,r.connect(u.destination),e.push(r);try{r.start(0,u.currentTime%t.duration,Math.pow(2,25))}catch(e){n=e,r.start(0,u.currentTime%t.duration)}return r})},c=function(t){var n;return n=e.indexOf(t),t.disconnect(),t.stop(0),n>-1&&e.splice(n,1),t},a=function(t,n){var e,r,i,u;return t.fftSize=512,e=new Float32Array(t.fftSize),u=null,i=null,(r=function(){return requestAnimationFrame(function(){var a,o,c,l;for(t.getFloatTimeDomainData(e),a=0,o=0,c=e.length;c>o;o++)l=e[o],a+=Math.abs(l);return a/=e.length,(!u||u>a)&&(u=a),(!i||a>i)&&(i=a),l=Math.round(1e3*Math.min((a-u)/(i-u),1))/1e3,n.style.opacity=1-l,t.finished?void 0:r()})})()},n=function(t){var n,e;return n=u.createAnalyser(),t.audio.connect(n),t.analyser=n,t.innerHTML="",e=document.createElement("tt-pulse"),t.appendChild(e),a(n,e)},i=function(e){var r;return this.playing?(c(this.audio),this.innerHTML="",null!=(r=this.analyser)&&(r.finished=!0),this.playing=!1,this.classList.remove("playing")):t(this.src).then(function(t){return function(e){return t.classList.add("playing"),t.audio=e,t.pulse&&n(t),t.playing=!0}}(this))},function(){var t,n,e,r,u;for(r=document.querySelectorAll("tt-cell"),u=[],n=0,e=r.length;e>n;n++)t=r[n],t.tabletone||(t.tabletone=!0,t.src=t.getAttribute("src"),t.pulse=null!=t.getAttribute("pulse"),t.playing=!1,u.push(t.addEventListener("click",i)));return u}()}).call(this);